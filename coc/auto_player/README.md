# COCåŒæ¨¡å¼è‡ªåŠ¨åŒ–ç³»ç»Ÿ

åŸºäºYOLOç›®æ ‡æ£€æµ‹å’ŒFeature-Drivenæ¶æ„çš„COCè‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œæ”¯æŒä¸»æ‘åº„(Home Village)å’Œå»ºç­‘å·¥äººåŸºåœ°(Builder Base)åŒæ¨¡å¼ã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
auto_player/
â”œâ”€â”€ main.py                    # ğŸš€ ç¨‹åºå…¥å£
â”œâ”€â”€ gui_main.py                # ğŸ–¥ï¸ GUIç•Œé¢ç¨‹åº
â”œâ”€â”€ README.md                  # ğŸ“– é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ __init__.py                # æ¨¡å—å¯¼å…¥
â”œâ”€â”€ core/                      # ğŸ”§ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ controller.py          # ä¸»æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ mode_manager.py        # ğŸ® æ¨¡å¼ç®¡ç†å™¨ (Home Village / Builder Base)
â”‚   â”œâ”€â”€ state_machine.py       # çŠ¶æ€æœºå’ŒåŸºç±»
â”‚   â”œâ”€â”€ ui_manager.py          # UIç®¡ç†å™¨
â”‚   â””â”€â”€ states/               # çŠ¶æ€å¤„ç†å™¨ (æŒ‰åŠŸèƒ½ç»„ç»‡)
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ home_village/      # ğŸ  ä¸»æ‘åº„çŠ¶æ€å¤„ç†å™¨
â”‚       â”‚   â”œâ”€â”€ __init__.py
â”‚       â”‚   â”œâ”€â”€ village.py          # ä¸»æ‘åº„æ‘åº„çŠ¶æ€
â”‚       â”‚   â”œâ”€â”€ finding_opponent.py # ä¸»æ‘åº„å¯»æ‰¾å¯¹æ‰‹çŠ¶æ€
â”‚       â”‚   â””â”€â”€ attacking.py        # ä¸»æ‘åº„æ”»å‡»çŠ¶æ€
â”‚       â””â”€â”€ builder_base/      # ğŸ—ï¸ å»ºç­‘å·¥äººåŸºåœ°çŠ¶æ€å¤„ç†å™¨
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ village.py          # å»ºç­‘å·¥äººåŸºåœ°æ‘åº„çŠ¶æ€
â”‚           â”œâ”€â”€ finding_opponent.py # å»ºç­‘å·¥äººåŸºåœ°å¯»æ‰¾å¯¹æ‰‹çŠ¶æ€
â”‚           â”œâ”€â”€ versus_battle.py    # å»ºç­‘å·¥äººåŸºåœ°VSå¯¹æˆ˜çŠ¶æ€
â”‚           â””â”€â”€ auto_battle/        # ğŸ¯ è‡ªåŠ¨æˆ˜æ–—åŠŸèƒ½çŠ¶æ€é›†
â”‚               â”œâ”€â”€ __init__.py
â”‚               â”œâ”€â”€ state1_village.py      # State 1: æ‘åº„ç•Œé¢
â”‚               â”œâ”€â”€ state2_attack_menu.py  # State 2: æ”»å‡»èœå•
â”‚               â”œâ”€â”€ state3_battle_scene.py # State 3: æˆ˜æ–—åœºæ™¯
â”‚               â”œâ”€â”€ state4_surrender_menu.py # State 4: æŠ•é™èœå•
â”‚               â”œâ”€â”€ state5_confirm_okay.py # State 5: ç¡®è®¤Okay
â”‚               â””â”€â”€ state6_return_home.py  # State 6: è¿”å›ä¸»é¡µ
â”œâ”€â”€ features/                  # ğŸŒŸ åŠŸèƒ½ç­–ç•¥ç³»ç»Ÿ (æ–°æ¶æ„)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py               # ç­–ç•¥åŸºç±»å’Œæ³¨å†Œè¡¨
â”‚   â”œâ”€â”€ home_village_features.py    # ğŸ  ä¸»æ‘åº„åŠŸèƒ½ç­–ç•¥
â”‚   â””â”€â”€ builder_base_features.py    # ğŸ—ï¸ å»ºç­‘å·¥äººåŸºåœ°åŠŸèƒ½ç­–ç•¥
â”œâ”€â”€ config/                   # âš™ï¸ é…ç½®æ–‡ä»¶ (æŒ‰åŠŸèƒ½ç»„ç»‡)
â”‚   â”œâ”€â”€ README.md              # é…ç½®è¯´æ˜æ–‡æ¡£
â”‚   â”œâ”€â”€ main_config.yaml       # ğŸŒ å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ ui_elements.yaml       # ğŸ¨ UIå…ƒç´ é€šç”¨é…ç½®
â”‚   â”œâ”€â”€ home_village/          # ğŸ  ä¸»æ‘åº„é…ç½®
â”‚   â”‚   â”œâ”€â”€ village_config.yaml    # ä¸»æ‘åº„åŸºç¡€é…ç½®
â”‚   â”‚   â””â”€â”€ states/                 # ä¸»æ‘åº„çŠ¶æ€é…ç½®
â”‚   â”‚       â”œâ”€â”€ village.yaml        # æ‘åº„çŠ¶æ€é…ç½®
â”‚   â”‚       â””â”€â”€ attacking.yaml      # æ”»å‡»çŠ¶æ€é…ç½®
â”‚   â””â”€â”€ builder_base/          # ğŸ—ï¸ å»ºç­‘å·¥äººåŸºåœ°é…ç½®  
â”‚       â”œâ”€â”€ village_config.yaml    # å»ºç­‘å·¥äººåŸºåœ°åŸºç¡€é…ç½®
â”‚       â”œâ”€â”€ states/                 # å»ºç­‘å·¥äººåŸºåœ°åŸºç¡€çŠ¶æ€é…ç½®
â”‚       â”‚   â”œâ”€â”€ village.yaml            # æ‘åº„çŠ¶æ€é…ç½®
â”‚       â”‚   â”œâ”€â”€ versus_battle.yaml      # VSå¯¹æˆ˜çŠ¶æ€é…ç½®
â”‚       â”‚   â””â”€â”€ finding_opponent.yaml   # å¯»æ‰¾å¯¹æ‰‹çŠ¶æ€é…ç½®
â”‚       â””â”€â”€ auto_battle/            # ğŸ¯ è‡ªåŠ¨æˆ˜æ–—åŠŸèƒ½é…ç½®
â”‚           â”œâ”€â”€ state1_village.yaml      # State 1: æ‘åº„ç•Œé¢é…ç½®
â”‚           â”œâ”€â”€ state2_attack_menu.yaml  # State 2: æ”»å‡»èœå•é…ç½®
â”‚           â”œâ”€â”€ state3_battle_scene.yaml # State 3: æˆ˜æ–—åœºæ™¯é…ç½®
â”‚           â”œâ”€â”€ state4_surrender_menu.yaml # State 4: æŠ•é™èœå•é…ç½®
â”‚           â”œâ”€â”€ state5_confirm_okay.yaml # State 5: ç¡®è®¤Okayé…ç½®
â”‚           â””â”€â”€ state6_return_home.yaml  # State 6: è¿”å›ä¸»é¡µé…ç½®
â”œâ”€â”€ utils/                    # ğŸ› ï¸ å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ helpers.py            # é€šç”¨å·¥å…·å‡½æ•°
â””â”€â”€ tests/                    # ğŸ§ª æµ‹è¯•æ–‡ä»¶
    â””â”€â”€ __init__.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. GUIç•Œé¢ (æ¨è)
```bash
cd auto_player
python gui_main.py
```

### 2. å‘½ä»¤è¡Œä½¿ç”¨
```bash
python main.py --model-path "ä½ çš„æ¨¡å‹è·¯å¾„.pt" --window "BlueStacks 5"
```

### 3. æµ‹è¯•æ¨¡å¼ï¼ˆåªæ£€æµ‹ä¸ç‚¹å‡»ï¼‰
```bash
python main.py --dry-run
```

## ğŸ® åŒæ¨¡å¼æ¶æ„

### Feature-Driven è®¾è®¡
ç³»ç»Ÿé‡‡ç”¨å…¨æ–°çš„**Feature-Driven**æ¶æ„ï¼Œæ›¿ä»£äº†æ—§çš„Task-Drivenè®¾è®¡ï¼š

**ğŸ  ä¸»æ‘åº„ (Home Village) åŠŸèƒ½ï¼š**
- âœ… æ”¶é›†èµ„æº (é‡‘å¸ã€åœ£æ°´ã€æš—é»‘é‡æ²¹)
- âœ… è‡ªåŠ¨æ”»å‡» (æ‰¾å¯¹æ‰‹â†’æ”»å‡»â†’è¿”å›)
- âœ… éƒ¨è½éƒ½åŸ (å¯é€‰)
- âœ… è®­ç»ƒéƒ¨é˜Ÿ (å¯é€‰) 
- âœ… å‡çº§å»ºç­‘ (å¯é€‰)

**ğŸ—ï¸ å»ºç­‘å·¥äººåŸºåœ° (Builder Base) åŠŸèƒ½ï¼š**
- âœ… æ”¶é›†èµ„æº (é‡‘å¸ã€åœ£æ°´)
- âœ… è‡ªåŠ¨æ”»å‡» (é€šè¿‡find_nowæŒ‰é’®)
- âœ… å‡çº§å»ºç­‘ (å¯é€‰)
- âœ… **è‡ªåŠ¨æˆ˜æ–—åŠŸèƒ½** (å®Œæ•´çš„6çŠ¶æ€å¾ªç¯)
  - State 1: æ‘åº„ç•Œé¢ â†’ å¯»æ‰¾AttackæŒ‰é’®
  - State 2: æ”»å‡»èœå• â†’ ç‚¹å‡»Find Nowå¼€å§‹åŒ¹é…
  - State 3: æˆ˜æ–—åœºæ™¯ â†’ æ™ºèƒ½éƒ¨ç½²å…µåŠ›ç›´åˆ°å¯æŠ•é™
  - State 4: æŠ•é™èœå• â†’ ç‚¹å‡»Surrenderç»“æŸæˆ˜æ–—
  - State 5: ç¡®è®¤å¯¹è¯ â†’ ç‚¹å‡»Okayç¡®è®¤æ“ä½œ
  - State 6: è¿”å›ä¸»é¡µ â†’ ç‚¹å‡»Return Homeå®Œæˆå¾ªç¯

### æ™ºèƒ½æ¨¡å¼æ£€æµ‹
- ğŸ” **è‡ªåŠ¨è¯†åˆ«**ï¼šç³»ç»Ÿä¼šæ ¹æ®UIå…ƒç´ è‡ªåŠ¨åˆ¤æ–­å½“å‰æ¨¡å¼
- ğŸ¯ **ç²¾ç¡®åˆ‡æ¢**ï¼šæ£€æµ‹åˆ°`find_now`æŒ‰é’® â†’ Builder Baseæ¨¡å¼
- ğŸ  **é»˜è®¤æ¨¡å¼**ï¼šæ£€æµ‹åˆ°`clan_capital_button`ç­‰ â†’ Home Villageæ¨¡å¼

## ğŸ¯ æŒ‰åŠŸèƒ½ç»„ç»‡çš„æ¶æ„è®¾è®¡

### æ ¸å¿ƒè®¾è®¡åŸåˆ™
ç³»ç»Ÿé‡‡ç”¨å…¨æ–°çš„**æŒ‰åŠŸèƒ½ç»„ç»‡**æ¶æ„è®¾è®¡ï¼Œæ¯ä¸ªæƒ³è¦å®ç°çš„åŠŸèƒ½éƒ½åœ¨å„è‡ªçš„æ–‡ä»¶å¤¹ä¸‹å•ç‹¬åˆ›å»ºæ–‡ä»¶å¤¹ï¼š

**ğŸ—‚ï¸ åŠŸèƒ½æ–‡ä»¶å¤¹ç»“æ„ï¼š**
```
builder_base/
â”œâ”€â”€ states/                 # åŸºç¡€çŠ¶æ€ï¼ˆé€šç”¨ï¼‰
â”œâ”€â”€ auto_battle/            # ğŸ¯ è‡ªåŠ¨æˆ˜æ–—åŠŸèƒ½
â”œâ”€â”€ auto_upgrade/           # ğŸ”§ è‡ªåŠ¨å‡çº§åŠŸèƒ½ (æœªæ¥)
â”œâ”€â”€ resource_management/    # ğŸ’° èµ„æºç®¡ç†åŠŸèƒ½ (æœªæ¥)
â””â”€â”€ clan_games/            # ğŸ† éƒ¨è½ç«èµ›åŠŸèƒ½ (æœªæ¥)
```

### åŠŸèƒ½çŠ¶æ€ç»„ç»‡
æ¯ä¸ªåŠŸèƒ½åŒ…å«è¯¥åŠŸèƒ½æ‰€éœ€çš„æ‰€æœ‰çŠ¶æ€ï¼š

**ä»¥auto_battleä¸ºä¾‹ï¼š**
- **State 1** - æ‘åº„ç•Œé¢çŠ¶æ€ï¼šè¯†åˆ«æ‘åº„ç¯å¢ƒï¼Œå¯»æ‰¾AttackæŒ‰é’®
- **State 2** - æ”»å‡»èœå•çŠ¶æ€ï¼šå¤„ç†Find NowæŒ‰é’®ï¼Œå¼€å§‹åŒ¹é…
- **State 3** - æˆ˜æ–—åœºæ™¯çŠ¶æ€ï¼šæ™ºèƒ½éƒ¨ç½²å…µåŠ›ï¼Œç›‘æ§æŠ•é™æ¡ä»¶
- **State 4** - æŠ•é™èœå•çŠ¶æ€ï¼šå¤„ç†æŠ•é™æŒ‰é’®ç‚¹å‡»
- **State 5** - ç¡®è®¤å¯¹è¯çŠ¶æ€ï¼šå¤„ç†ç¡®è®¤å¯¹è¯æ¡†
- **State 6** - è¿”å›ä¸»é¡µçŠ¶æ€ï¼šå®Œæˆå¾ªç¯è¿”å›æ‘åº„

### æ¶æ„ä¼˜åŠ¿

**1. ğŸ¯ åŠŸèƒ½éš”ç¦»**
- æ¯ä¸ªåŠŸèƒ½çš„çŠ¶æ€å®Œå…¨ç‹¬ç«‹ï¼Œäº’ä¸å¹²æ‰°
- æ–°åŠŸèƒ½å¼€å‘ä¸ä¼šå½±å“ç°æœ‰åŠŸèƒ½
- åŠŸèƒ½å¯ä»¥ç‹¬ç«‹å¯ç”¨/ç¦ç”¨

**2. ğŸ”§ æ˜“äºæ‰©å±•**
- æ·»åŠ æ–°åŠŸèƒ½ï¼šåˆ›å»ºæ–°çš„åŠŸèƒ½æ–‡ä»¶å¤¹
- æ·»åŠ æ–°çŠ¶æ€ï¼šåœ¨åŠŸèƒ½æ–‡ä»¶å¤¹å†…æ·»åŠ çŠ¶æ€æ–‡ä»¶
- é…ç½®å’Œä»£ç ç»“æ„å®Œå…¨å¯¹åº”

**3. ğŸ“ æ¸…æ™°ç®¡ç†**
- åŠŸèƒ½ç›¸å…³çš„æ‰€æœ‰æ–‡ä»¶é›†ä¸­ç®¡ç†
- é¿å…ä¸åŒåŠŸèƒ½é—´çš„çŠ¶æ€æ··æ·†
- ä¾¿äºå›¢é˜Ÿåä½œå¼€å‘

**4. ğŸ® çµæ´»é…ç½®**
- æ¯ä¸ªåŠŸèƒ½æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶é›†
- æ”¯æŒåŠŸèƒ½çº§åˆ«çš„å‚æ•°è°ƒä¼˜
- é…ç½®æ–‡ä»¶ç»“æ„ä¸ä»£ç ç»“æ„ä¸€è‡´

## âš™ï¸ é…ç½®è¯´æ˜

### æ¨¡å‹è¦æ±‚
ä½ çš„YOLOæ¨¡å‹éœ€è¦èƒ½è¯†åˆ«ä»¥ä¸‹ç±»åˆ«ï¼š

**æ ¸å¿ƒUIå…ƒç´ ï¼š**
- `attack` / `attack_button` - æ”»å‡»æŒ‰é’®
- `find_now` - Find NowæŒ‰é’®ï¼ˆBuilder Baseç‰¹æœ‰ï¼‰
- `clan_capital_button` - éƒ¨è½éƒ½åŸæŒ‰é’®ï¼ˆHome Villageç‰¹æœ‰ï¼‰

**èµ„æºæ”¶é›†ï¼š**
- `gold_collector` / `bb_gold_collector` - é‡‘å¸æ”¶é›†å™¨
- `elixir_collector` / `bb_elixir_collector` - åœ£æ°´æ”¶é›†å™¨  
- `dark_elixir_collector` - æš—é»‘é‡æ²¹æ”¶é›†å™¨ï¼ˆä»…Home Villageï¼‰

**å…¶ä»–åŠŸèƒ½ï¼š**
- `barracks_button` - å…µè¥æŒ‰é’®
- `upgrade_available` / `bb_upgrade_available` - å‡çº§æç¤º
- `army_full_indicator` - å†›é˜Ÿå‡†å¤‡å°±ç»ªæŒ‡ç¤ºå™¨
- `surrender_button` - æŠ•é™æŒ‰é’®ï¼ˆæ”»å‡»çŠ¶æ€ï¼‰

### é…ç½®æ–‡ä»¶ç³»ç»Ÿ
é‡‡ç”¨**æŒ‰æ¨¡å¼åˆ†ç¦»**çš„é…ç½®ç³»ç»Ÿï¼Œå®Œç¾åŒ¹é…æ–°çš„Feature-Drivenæ¶æ„ï¼š

**ğŸ  ä¸»æ‘åº„é…ç½®** (`home_village/village_config.yaml`)ï¼š
- 5ä¸ªåŠŸèƒ½çš„ç‹¬ç«‹å¼€å…³é…ç½®
- ä¸»æ‘åº„ç‰¹æœ‰UIå…ƒç´ è¯†åˆ«
- æš—é»‘é‡æ²¹ç­‰ä¸“å±èµ„æºé…ç½®

**ğŸ—ï¸ å»ºç­‘å·¥äººåŸºåœ°é…ç½®** (`builder_base/village_config.yaml`)ï¼š
- 3ä¸ªåŠŸèƒ½çš„ç‹¬ç«‹å¼€å…³é…ç½®  
- find_nowæŒ‰é’®ä½ç½®è®¡ç®—
- ç®€åŒ–çš„èµ„æºæ”¶é›†é…ç½®

**ğŸ”„ é€šç”¨çŠ¶æ€é…ç½®** (`states/`)ï¼š
- `finding_config.yaml` - å¯»æ‰¾å¯¹æ‰‹çŠ¶æ€
- `attacking_config.yaml` - æ”»å‡»çŠ¶æ€

**ğŸŒ å…¨å±€é…ç½®**ï¼š
- `main_config.yaml` - ç³»ç»Ÿçº§è®¾ç½®
- `ui_elements.yaml` - UIå…ƒç´ é€šç”¨å±æ€§

**ä¼˜åŠ¿ï¼š**
- ğŸ® **æ¨¡å¼åˆ†ç¦»**ï¼šæ¯ä¸ªæ¸¸æˆæ¨¡å¼æœ‰ç‹¬ç«‹çš„é…ç½®ç©ºé—´
- ğŸ¯ **åŠŸèƒ½å¯¼å‘**ï¼šåŸºäºFeature-Drivenè®¾è®¡çš„é…ç½®ç»“æ„
- ğŸ”’ **é™ä½é£é™©**ï¼šæ¨¡å¼é—´é…ç½®å®Œå…¨éš”ç¦»
- ğŸ“ **æ¸…æ™°ç»“æ„**ï¼šé…ç½®æ–‡ä»¶ç»“æ„ä¸ä»£ç ç»“æ„ä¸€è‡´
- ğŸ”„ **æ˜“äºç»´æŠ¤**ï¼šè¯¦ç»†çš„é…ç½®è¯´æ˜æ–‡æ¡£

## ğŸ® å·¥ä½œæµç¨‹

### è‡ªåŠ¨åŒ–æµç¨‹
1. **æ¨¡å¼æ£€æµ‹** â†’ è‡ªåŠ¨è¯†åˆ«å½“å‰æ˜¯Home Villageè¿˜æ˜¯Builder Base
2. **åŠŸèƒ½æ‰§è¡Œ** â†’ æŒ‰ä¼˜å…ˆçº§æ‰§è¡Œå¯ç”¨çš„åŠŸèƒ½ï¼š
   - æ”¶é›†èµ„æº (ä¼˜å…ˆçº§æœ€é«˜)
   - è®­ç»ƒéƒ¨é˜Ÿ / å‡çº§å»ºç­‘
   - æ”»å‡»å¾ªç¯
3. **çŠ¶æ€è½¬æ¢** â†’ æ”»å‡»åŠŸèƒ½è§¦å‘çŠ¶æ€åˆ‡æ¢ï¼šæ‘åº„â†’å¯»æ‰¾å¯¹æ‰‹â†’æ”»å‡»â†’è¿”å›æ‘åº„
4. **å¾ªç¯ç»§ç»­** â†’ è¿”å›æ‘åº„åé‡æ–°å¼€å§‹åŠŸèƒ½æ£€æŸ¥

### åŒæ¨¡å¼å·®å¼‚
**ğŸ  Home Village:**
- æ›´å¤šåŠŸèƒ½é€‰é¡¹ (5ç§åŠŸèƒ½)
- æ”¯æŒæš—é»‘é‡æ²¹æ”¶é›†
- åŒ…å«éƒ¨è½éƒ½åŸåŠŸèƒ½

**ğŸ—ï¸ Builder Base:**  
- åŠŸèƒ½ç›¸å¯¹ç®€å• (3ç§åŠŸèƒ½)
- é€šè¿‡`find_now`æŒ‰é’®è¿›è¡Œæ”»å‡»
- ä¸“æ³¨äºåŸºç¡€çš„æ”¶é›†å’Œæ”»å‡»

## ğŸ”§ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°åŠŸèƒ½ç­–ç•¥
ç³»ç»Ÿé‡‡ç”¨ç­–ç•¥æ¨¡å¼ï¼Œæ·»åŠ æ–°åŠŸèƒ½éå¸¸ç®€å•ï¼š

**æ­¥éª¤1ï¼šåˆ›å»ºåŠŸèƒ½ç­–ç•¥ç±»**
```python
# features/home_village_features.py æˆ– builder_base_features.py
from .base import FeatureStrategy, FeatureType, GameMode

class NewFeatureStrategy(FeatureStrategy):
    def __init__(self):
        super().__init__(FeatureType.NEW_FEATURE, GameMode.HOME_VILLAGE)
        self.description = "æ–°åŠŸèƒ½æè¿°"
        self.cooldown_seconds = 10
        
    def can_execute(self, detections, config):
        # æ£€æŸ¥æ˜¯å¦å¯ä»¥æ‰§è¡Œ
        return self.is_enabled(config) and self.has_required_ui(detections)
        
    def execute(self, detections, window_info):
        # æ‰§è¡ŒåŠŸèƒ½é€»è¾‘
        print("æ‰§è¡Œæ–°åŠŸèƒ½...")
        return None
```

**æ­¥éª¤2ï¼šæ³¨å†ŒåŠŸèƒ½ç­–ç•¥**
```python
# åœ¨å¯¹åº”çš„register_xxx_features()å‡½æ•°ä¸­æ·»åŠ 
feature_registry.register(NewFeatureStrategy())
```

**æ­¥éª¤3ï¼šæ·»åŠ åŠŸèƒ½ç±»å‹**
```python
# features/FeatureHandler.py ä¸­çš„FeatureTypeæšä¸¾
class FeatureType(Enum):
    # ç°æœ‰åŠŸèƒ½...
    NEW_FEATURE = "new_feature"  # æ·»åŠ æ–°ç±»å‹
```

### æ·»åŠ æ–°çŠ¶æ€å¤„ç†å™¨

**ä¸ºç‰¹å®šæ¨¡å¼æ·»åŠ çŠ¶æ€å¤„ç†å™¨ï¼š**
```python
# core/states/home_village/custom.py
from ....features.base import GameMode
from ...state_machine import StateHandler, GameState
from ...mode_manager import mode_manager

class HomeVillageCustomHandler(StateHandler):
    def __init__(self):
        super().__init__(GameState.CUSTOM)
    
    def can_handle(self, detections):
        # æ£€æŸ¥æ˜¯å¦ä¸ºä¸»æ‘åº„ç¯å¢ƒ
        clan_capital = [d for d in detections if d.class_name == "clan_capital_button"]
        return len(clan_capital) > 0
        
    def execute(self, detections, window_info):
        mode_manager.set_mode(GameMode.HOME_VILLAGE)
        # æ‰§è¡Œä¸»æ‘åº„ç‰¹å®šé€»è¾‘
        return None
```

**æ·»åŠ é€šç”¨çŠ¶æ€å¤„ç†å™¨ï¼š**
```python
# core/states/custom.py
from ..state_machine import StateHandler, GameState

class GenericCustomHandler(StateHandler):
    def __init__(self):
        super().__init__(GameState.CUSTOM)
    
    def can_handle(self, detections):
        return False
        
    def execute(self, detections, window_info):
        return None
```

### æ·»åŠ å·¥å…·å‡½æ•°
åœ¨`utils/helpers.py`ä¸­æ·»åŠ é€šç”¨å·¥å…·å‡½æ•°ï¼š
```python
def your_utility_function():
    """ä½ çš„å·¥å…·å‡½æ•°"""
    pass
```

### ä¿®æ”¹UIé…ç½®
ç°åœ¨æ¯ä¸ªçŠ¶æ€éƒ½æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ä¿®æ”¹æ‘åº„çŠ¶æ€ï¼š

**ç¼–è¾‘ `config/village_config.yaml`ï¼š**
```yaml
# çŠ¶æ€è¯†åˆ«æ ‡è¯†
indicators:
  required: ["find_now"]
  optional: ["attack"]
  
# ç›¸å¯¹ä½ç½®é…ç½®
relative_positions:
  attack_from_find_now: [0, -60]
  
# æ—¶é—´é…ç½®
timing:
  max_duration: 30
  click_delay: 0.1
```

**åˆ›å»ºæ–°çŠ¶æ€é…ç½®ï¼š**
```yaml
# config/custom_config.yaml
state_name: "custom_state"
indicators:
  required: ["custom_element"]
relative_positions:
  button_position: [100, 50]
```

## ğŸ› è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹æ£€æµ‹ç»“æœ**ï¼šè¿è¡Œæ—¶ä¼šæ˜¾ç¤ºå®æ—¶ç”»é¢å’Œæ£€æµ‹æ¡†
2. **è°ƒæ•´ç½®ä¿¡åº¦**ï¼šä¿®æ”¹`ui_config.yaml`ä¸­çš„`confidence_threshold`
3. **çŠ¶æ€æ—¥å¿—**ï¼šæ§åˆ¶å°ä¼šæ˜¾ç¤ºçŠ¶æ€è½¬æ¢å’Œæ“ä½œæ—¥å¿—
4. **æµ‹è¯•æ¨¡å¼**ï¼šä½¿ç”¨`--dry-run`å‚æ•°æµ‹è¯•æ£€æµ‹æ•ˆæœ

## âš ï¸ æ³¨æ„äº‹é¡¹

- ç¡®ä¿æ¸¸æˆçª—å£å¯è§ä¸”æœªè¢«é®æŒ¡
- å»ºè®®åœ¨1920x1080åˆ†è¾¨ç‡ä¸‹ä½¿ç”¨
- ç¬¬ä¸€æ¬¡ä½¿ç”¨å»ºè®®ç”¨æµ‹è¯•æ¨¡å¼éªŒè¯æ£€æµ‹æ•ˆæœ
- æ¸¸æˆæ›´æ–°å¯èƒ½éœ€è¦é‡æ–°è®­ç»ƒæ¨¡å‹æˆ–è°ƒæ•´é…ç½®

## ğŸ“ TODO

### ğŸ¯ çŸ­æœŸè®¡åˆ’
- [ ] æ›´æ–°GUIç•Œé¢æ”¯æŒFeature-Drivené…ç½®
- [ ] å®Œå–„auto_battleåŠŸèƒ½çš„é”™è¯¯æ¢å¤æœºåˆ¶
- [ ] æ·»åŠ æˆ˜æ–—ç»“æœç»Ÿè®¡å’Œæ€§èƒ½ç›‘æ§
- [ ] åˆ›å»ºåŠŸèƒ½é›†æˆæµ‹è¯•å¥—ä»¶

### ğŸš€ ä¸­æœŸè®¡åˆ’
- [ ] å®ç°auto_upgradeè‡ªåŠ¨å‡çº§åŠŸèƒ½
  - [ ] å»ºç­‘æ‰«æçŠ¶æ€
  - [ ] å‡çº§ä¼˜å…ˆçº§ç®—æ³•
  - [ ] èµ„æºéœ€æ±‚æ£€æŸ¥
- [ ] å®ç°resource_managementèµ„æºç®¡ç†åŠŸèƒ½
  - [ ] æ™ºèƒ½èµ„æºåˆ†é…
  - [ ] èµ„æºæ”¶é›†ä¼˜åŒ–
  - [ ] å­˜å‚¨å®¹é‡ç›‘æ§

### ğŸŒŸ é•¿æœŸè®¡åˆ’  
- [ ] å¤šåˆ†è¾¨ç‡é€‚é…ç³»ç»Ÿ
- [ ] Webç•Œé¢ç›‘æ§é¢æ¿
- [ ] æ·»åŠ home_villageä¸“å±åŠŸèƒ½
  - [ ] éƒ¨è½éƒ½åŸè‡ªåŠ¨åŒ–
  - [ ] éƒ¨è½ç«èµ›ä»»åŠ¡
  - [ ] æå…µåŠŸèƒ½
- [ ] AIè¾…åŠ©éƒ¨ç½²ç­–ç•¥
- [ ] äº‘ç«¯é…ç½®åŒæ­¥

## ğŸ†• ç‰ˆæœ¬å†å²

### v2.1.0 - æŒ‰åŠŸèƒ½ç»„ç»‡æ¶æ„ ğŸ¯
- âœ… **é‡æ„çŠ¶æ€æ¶æ„**ï¼šé‡‡ç”¨æŒ‰åŠŸèƒ½ç»„ç»‡çš„è®¾è®¡æ¨¡å¼
- âœ… **å®ç°è‡ªåŠ¨æˆ˜æ–—åŠŸèƒ½**ï¼šå®Œæ•´çš„6çŠ¶æ€å¾ªç¯ç³»ç»Ÿ
  - State 1: æ‘åº„ç•Œé¢ â†’ State 2: æ”»å‡»èœå• â†’ State 3: æˆ˜æ–—åœºæ™¯
  - State 4: æŠ•é™èœå• â†’ State 5: ç¡®è®¤å¯¹è¯ â†’ State 6: è¿”å›ä¸»é¡µ
- âœ… **é…ç½®ç³»ç»Ÿé‡æ„**ï¼šåŠŸèƒ½æ–‡ä»¶å¤¹å¯¹åº”é…ç½®æ–‡ä»¶å¤¹
- âœ… **çŠ¶æ€æœºæ‰©å±•**ï¼šæ–°å¢6ä¸ªä¸“ç”¨GameStateæšä¸¾
- âœ… **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹ç®¡ç†æ‰€éœ€çŠ¶æ€
- âœ… **æ™ºèƒ½éƒ¨ç½²ç­–ç•¥**ï¼šæ”¯æŒå¤šç§éƒ¨ç½²æ¨¡å¼å’Œæˆ˜æ–—æœºå™¨ä¼˜å…ˆçº§

### v2.0.0 - Feature-Drivenæ¶æ„
- âœ… é‡æ„ä¸ºåŒæ¨¡å¼æ”¯æŒ (Home Village + Builder Base)
- âœ… é‡‡ç”¨Feature-Drivenæ›¿ä»£Task-Driven
- âœ… å®ç°ç­–ç•¥æ¨¡å¼ï¼Œæå¤§æå‡æ‰©å±•æ€§
- âœ… æ™ºèƒ½æ¨¡å¼æ£€æµ‹å’Œè‡ªåŠ¨åˆ‡æ¢
- âœ… æ¨¡å—åŒ–çš„åŠŸèƒ½é…ç½®ç³»ç»Ÿ

### v1.0.0 - åŸºç¡€ç‰ˆæœ¬
- âœ… åŸºäºçŠ¶æ€æœºçš„Builder Baseè‡ªåŠ¨æ”»å‡»
- âœ… YOLOç›®æ ‡æ£€æµ‹é›†æˆ
- âœ… åŸºç¡€çš„UIé…ç½®ç³»ç»Ÿ