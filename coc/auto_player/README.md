# COCå¤œä¸–ç•Œè‡ªåŠ¨æ”»å‡»ç³»ç»Ÿ

åŸºäºYOLOç›®æ ‡æ£€æµ‹å’ŒçŠ¶æ€æœºçš„COCå¤œä¸–ç•Œè‡ªåŠ¨åŒ–æ”»å‡»ç³»ç»Ÿã€‚

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
auto_player/
â”œâ”€â”€ main.py                  # ğŸš€ ç¨‹åºå…¥å£
â”œâ”€â”€ README.md                # ğŸ“– é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ __init__.py              # æ¨¡å—å¯¼å…¥
â”œâ”€â”€ core/                    # ğŸ”§ æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ controller.py        # ä¸»æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ state_machine.py     # çŠ¶æ€æœºå’ŒåŸºç±»
â”‚   â”œâ”€â”€ ui_manager.py        # UIç®¡ç†å™¨
â”‚   â””â”€â”€ states/             # çŠ¶æ€å¤„ç†å™¨
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ village.py       # æ‘åº„çŠ¶æ€
â”‚       â”œâ”€â”€ finding.py       # å¯»æ‰¾å¯¹æ‰‹çŠ¶æ€
â”‚       â””â”€â”€ attacking.py     # æ”»å‡»çŠ¶æ€
â”œâ”€â”€ config/                 # âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ main_config.yaml     # å…¨å±€é…ç½®
â”‚   â”œâ”€â”€ village_config.yaml  # æ‘åº„çŠ¶æ€é…ç½®
â”‚   â”œâ”€â”€ finding_config.yaml  # å¯»æ‰¾å¯¹æ‰‹é…ç½®
â”‚   â”œâ”€â”€ attacking_config.yaml # æ”»å‡»çŠ¶æ€é…ç½®
â”‚   â””â”€â”€ ui_elements.yaml     # UIå…ƒç´ é€šç”¨é…ç½®
â”œâ”€â”€ utils/                  # ğŸ› ï¸ å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ helpers.py          # é€šç”¨å·¥å…·å‡½æ•°
â””â”€â”€ tests/                  # ğŸ§ª æµ‹è¯•æ–‡ä»¶
    â””â”€â”€ __init__.py
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. åŸºæœ¬ä½¿ç”¨
```bash
cd auto_player
python main.py
```

### 2. è‡ªå®šä¹‰å‚æ•°
```bash
python main.py --model-path "ä½ çš„æ¨¡å‹è·¯å¾„.pt" --window "BlueStacks 5"
```

### 3. æµ‹è¯•æ¨¡å¼ï¼ˆåªæ£€æµ‹ä¸ç‚¹å‡»ï¼‰
```bash
python main.py --dry-run
```

## âš™ï¸ é…ç½®è¯´æ˜

### æ¨¡å‹è¦æ±‚
ä½ çš„YOLOæ¨¡å‹éœ€è¦èƒ½è¯†åˆ«ä»¥ä¸‹ç±»åˆ«ï¼š
- `attack` - æ”»å‡»æŒ‰é’®
- `find_now` - Find NowæŒ‰é’®ï¼ˆBuilder Baseç‰¹æœ‰ï¼‰
- `surrender_button` - æŠ•é™æŒ‰é’®ï¼ˆå¯é€‰ï¼‰
- `empty_space` - ç©ºåœ°/éƒ¨ç½²åŒºåŸŸï¼ˆå¯é€‰ï¼‰

### é…ç½®æ–‡ä»¶ç³»ç»Ÿ
ç°åœ¨ä½¿ç”¨æ¨¡å—åŒ–é…ç½®ï¼Œæ¯ä¸ªçŠ¶æ€éƒ½æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼š

- **`main_config.yaml`** - å…¨å±€è®¾ç½®ï¼ˆæ¨¡å‹è·¯å¾„ã€çª—å£é…ç½®ç­‰ï¼‰
- **`village_config.yaml`** - æ‘åº„çŠ¶æ€ä¸“ç”¨é…ç½®  
- **`finding_config.yaml`** - å¯»æ‰¾å¯¹æ‰‹çŠ¶æ€é…ç½®
- **`attacking_config.yaml`** - æ”»å‡»çŠ¶æ€é…ç½®
- **`ui_elements.yaml`** - UIå…ƒç´ é€šç”¨å±æ€§

**ä¼˜åŠ¿ï¼š**
- ğŸ¯ **ç²¾ç¡®ä¿®æ”¹**ï¼šåªéœ€ç¼–è¾‘ç›¸å…³çŠ¶æ€çš„é…ç½®æ–‡ä»¶
- ğŸ”’ **é™ä½é£é™©**ï¼šä¸ä¼šè¯¯æ”¹å…¶ä»–çŠ¶æ€çš„è®¾ç½®
- ğŸ“ **æ˜“äºç®¡ç†**ï¼šé…ç½®èŒè´£æ¸…æ™°åˆ†ç¦»
- ğŸ”„ **ä¾¿äºæ›´æ–°**ï¼šæ¸¸æˆUIæ›´æ–°åªéœ€è°ƒæ•´å¯¹åº”æ–‡ä»¶

## ğŸ® å·¥ä½œæµç¨‹

1. **æ‘åº„çŠ¶æ€** â†’ æ£€æµ‹åˆ°`find_now`æŒ‰é’®ï¼Œç‚¹å‡»`attack`
2. **å¯»æ‰¾å¯¹æ‰‹** â†’ ç­‰å¾…åŒ¹é…å®Œæˆï¼Œè¿›å…¥æ”»å‡»ç•Œé¢
3. **æ”»å‡»çŠ¶æ€** â†’ éƒ¨ç½²éƒ¨é˜Ÿï¼Œå®ŒæˆåæŠ•é™
4. **è¿”å›æ‘åº„** â†’ ç‚¹å‡»è¿”å›æŒ‰é’®ï¼Œå¼€å§‹ä¸‹ä¸€è½®

## ğŸ”§ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çŠ¶æ€
1. åœ¨`core/states/`ç›®å½•åˆ›å»ºæ–°çš„å¤„ç†å™¨ç±»
2. ç»§æ‰¿`StateHandler`åŸºç±»
3. å®ç°`can_handle()`å’Œ`execute()`æ–¹æ³•
4. åœ¨`core/controller.py`ä¸­æ³¨å†Œ

### ç¤ºä¾‹ï¼š
```python
# core/states/custom.py
from ..state_machine import StateHandler, GameState

class CustomHandler(StateHandler):
    def __init__(self):
        super().__init__(GameState.CUSTOM)
    
    def can_handle(self, detections):
        # å®ç°çŠ¶æ€åˆ¤æ–­é€»è¾‘
        return False
        
    def execute(self, detections, window_info):
        # å®ç°çŠ¶æ€æ“ä½œé€»è¾‘
        return None
```

### æ·»åŠ å·¥å…·å‡½æ•°
åœ¨`utils/helpers.py`ä¸­æ·»åŠ é€šç”¨å·¥å…·å‡½æ•°ï¼š
```python
def your_utility_function():
    """ä½ çš„å·¥å…·å‡½æ•°"""
    pass
```

### ä¿®æ”¹UIé…ç½®
ç°åœ¨æ¯ä¸ªçŠ¶æ€éƒ½æœ‰ç‹¬ç«‹çš„é…ç½®æ–‡ä»¶ï¼Œæ¯”å¦‚ä¿®æ”¹æ‘åº„çŠ¶æ€ï¼š

**ç¼–è¾‘ `config/village_config.yaml`ï¼š**
```yaml
# çŠ¶æ€è¯†åˆ«æ ‡è¯†
indicators:
  required: ["find_now"]
  optional: ["attack"]
  
# ç›¸å¯¹ä½ç½®é…ç½®
relative_positions:
  attack_from_find_now: [0, -60]
  
# æ—¶é—´é…ç½®
timing:
  max_duration: 30
  click_delay: 0.1
```

**åˆ›å»ºæ–°çŠ¶æ€é…ç½®ï¼š**
```yaml
# config/custom_config.yaml
state_name: "custom_state"
indicators:
  required: ["custom_element"]
relative_positions:
  button_position: [100, 50]
```

## ğŸ› è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹æ£€æµ‹ç»“æœ**ï¼šè¿è¡Œæ—¶ä¼šæ˜¾ç¤ºå®æ—¶ç”»é¢å’Œæ£€æµ‹æ¡†
2. **è°ƒæ•´ç½®ä¿¡åº¦**ï¼šä¿®æ”¹`ui_config.yaml`ä¸­çš„`confidence_threshold`
3. **çŠ¶æ€æ—¥å¿—**ï¼šæ§åˆ¶å°ä¼šæ˜¾ç¤ºçŠ¶æ€è½¬æ¢å’Œæ“ä½œæ—¥å¿—
4. **æµ‹è¯•æ¨¡å¼**ï¼šä½¿ç”¨`--dry-run`å‚æ•°æµ‹è¯•æ£€æµ‹æ•ˆæœ

## âš ï¸ æ³¨æ„äº‹é¡¹

- ç¡®ä¿æ¸¸æˆçª—å£å¯è§ä¸”æœªè¢«é®æŒ¡
- å»ºè®®åœ¨1920x1080åˆ†è¾¨ç‡ä¸‹ä½¿ç”¨
- ç¬¬ä¸€æ¬¡ä½¿ç”¨å»ºè®®ç”¨æµ‹è¯•æ¨¡å¼éªŒè¯æ£€æµ‹æ•ˆæœ
- æ¸¸æˆæ›´æ–°å¯èƒ½éœ€è¦é‡æ–°è®­ç»ƒæ¨¡å‹æˆ–è°ƒæ•´é…ç½®

## ğŸ“ TODO

- [ ] æ·»åŠ æ›´å¤šçŠ¶æ€ï¼ˆæŠ•é™ç¡®è®¤ã€è¿”å›æ‘åº„ç­‰ï¼‰
- [ ] æ™ºèƒ½éƒ¨é˜Ÿéƒ¨ç½²ç­–ç•¥
- [ ] å¤šåˆ†è¾¨ç‡é€‚é…
- [ ] æˆ˜æ–—ç»“æœç»Ÿè®¡
- [ ] Webç•Œé¢ç›‘æ§